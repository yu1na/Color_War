<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정치 댓글 전쟁 시뮬레이터 (로컬 LLM)</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <h1>🔥 정치 댓글 전쟁 시뮬레이터 🔥</h1>
            <p class="subtitle">로컬 LLM 기반 - 댓글을 수집하여 좌파/우파 AI가 싸웁니다</p>
            <div id="serverStatus" class="server-status">서버 확인 중...</div>
        </header>

        <!-- 1단계: 댓글 수집 -->
        <section class="section" id="collectionSection">
            <h2>1단계: 댓글 수집 (각 진영 5개 이상 필요)</h2>
            
            <div class="collection-grid">
                <div class="collection-box left">
                    <h3>🔵 좌파 댓글 수집</h3>
                    <textarea 
                        id="leftComments" 
                        placeholder="좌파(진보) 성향의 댓글을 한 줄에 하나씩 입력하세요...&#10;&#10;예시:&#10;진보적 개혁이 필요합니다&#10;복지 예산을 늘려야 해요&#10;평등한 사회를 만들어야 합니다"
                        rows="8"
                    ></textarea>
                    <button id="submitLeftBtn" class="btn btn-left">좌파 댓글 수집</button>
                    <div class="count">수집된 댓글: <span id="leftCount">0</span>개</div>
                </div>

                <div class="collection-box right">
                    <h3>🔴 우파 댓글 수집</h3>
                    <textarea 
                        id="rightComments" 
                        placeholder="우파(보수) 성향의 댓글을 한 줄에 하나씩 입력하세요...&#10;&#10;예시:&#10;경제 성장이 우선입니다&#10;안보가 가장 중요합니다&#10;재정 건전성을 지켜야 합니다"
                        rows="8"
                    ></textarea>
                    <button id="submitRightBtn" class="btn btn-right">우파 댓글 수집</button>
                    <div class="count">수집된 댓글: <span id="rightCount">0</span>개</div>
                </div>
            </div>

            <div id="personaStatus" class="persona-status"></div>
        </section>

        <!-- 2단계: 페르소나 생성 -->
        <section class="section highlight-section" id="analysisSection" style="display: none;">
            <h2>2단계: 페르소나 생성 🤖</h2>
            <p>수집된 댓글을 기반으로 AI가 좌파/우파 페르소나를 생성합니다.</p>
            <div class="info-message" style="margin-bottom: 20px;">
                💡 LLM이 댓글의 말투, 감정, 키워드를 분석하여 자동으로 페르소나를 만듭니다.<br>
                ⏱️ 1-2분 정도 소요될 수 있습니다.
            </div>
            <button id="analyzeBtn" class="btn btn-primary btn-large">🚀 페르소나 생성 시작</button>
            <div id="analysisLoading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>🤖 AI가 댓글 패턴을 분석하여 페르소나를 생성하는 중...<br>(1-2분 소요될 수 있습니다)</p>
            </div>
            <div id="analysisResult" class="analysis-result"></div>
        </section>

        <!-- 3단계: 토론 시작 -->
        <section class="section highlight-section" id="debateSection" style="display: none;">
            <h2>3단계: 댓글 전쟁 🔥</h2>
            
            <div class="control-panel">
                <div class="status-info">
                    <span>메시지 수: <strong id="messageCount">0</strong></span>
                    <span>현재 주제: <strong id="currentTopic">-</strong></span>
                </div>
                <div class="control-buttons">
                    <button id="startDebateBtn" class="btn btn-success btn-large">🚀 토론 시작하기</button>
                    <button id="pauseBtn" class="btn btn-warning" style="display: none;">⏸ 일시정지</button>
                    <button id="resumeBtn" class="btn btn-success" style="display: none;">▶ 재개</button>
                    <button id="stopBtn" class="btn btn-danger" style="display: none;">⏹ 중지</button>
                </div>
            </div>

            <div class="debate-arena">
                <div id="debateMessages" class="messages-container">
                    <div class="empty-message">
                        <p>💬 토론이 시작되면 여기에 좌파와 우파의 댓글 전쟁이 표시됩니다.</p>
                        <p>위의 "토론 시작" 버튼을 눌러주세요!</p>
                    </div>
                </div>
            </div>

            <div id="debateEndMessage" class="end-message" style="display: none;">
                <h3>🏁 토론 종료</h3>
                <p>총 <strong id="totalMessages">0</strong>개의 댓글이 오갔습니다.</p>
                <button id="restartBtn" class="btn btn-primary">처음부터 다시</button>
            </div>
        </section>

        <!-- 푸터 -->
        <footer class="footer">
            <p>Powered by Local LLM (beomi/llama-2-ko-7b + KISTI-KONI/KONI-Llama3-8B-Instruct)</p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>

